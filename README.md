# Telegram-бот для психологической поддержки
Программа представляет из себя чат-бот в Телеграмме с использованием БЯМ Gigachat. Бот помогает пользователю следить за динамикой своего настроения и оказывает моральную поддержку, если это необходимо.

**Функционал бота**:
- **Регистрация** новых пользователей в системе. Проверка на регистрацию с помощью middleware функции;
- **Диалог с БЯМ** в любое время: пользователь может написать боту и пообщаться с ним. Бот настроен общаться с пользователем как внимательный друг и поддержка;
- **Дневник настроения**: бот периодически просит пользователя оценить своё состояние по 10-балльной шкале и сохраняет эти данные.
- **Результаты дневника настроений**: бот строит и присылает график по ранее полученным от пользователя данным, делает выводо динамике настроения, даёт рекомендации.
- **Встроенные психологические тесты: GAD-7, PSS-14, SWLSS**, для оценки благополучия пользователя.

## Установка проекта
Для того, чтобы установить и запустить проект на своём компьютере, вам понадобится:

1. Python 3.11+
2. Утилита **make** для сборки проекта. [Инструкция по установке](https://stackoverflow.com/questions/32127524/how-to-install-and-use-make-in-windows)
3. **Docker desktop** для изолированной развёртки программы на компьютере. [Установить можно по ссылке.](https://docs.docker.com/get-started/get-docker/)
4. Необязательно: утилита git

Имея на компьютере все эти инструменты, вы можете приступить к установке:
1. Создайте на своём компьютере папку, откройте её в терминале, клонируйте туда проект. Это можно сделать вручную, скопировав данный проект, или с помощью **git**: `git clone https://github.com/Brajenko/psychology-bot`.
2. Создайте виртуальное окружение `python`. Для этого в терминале необходимо прописать следующую команду: `python -m venv .venv`. Если у вас Mac или Linux, вам может понадобиться написать `python3` вместо `python` 
3. Активируйте виртуальное окружение. Это делается по-разному в зависимости от операционной системы и типа терминала (Powershell, Bash). Инструкцию можно [найти в интернете](https://python.land/virtual-environments/virtualenv).
4. Создайте файл `.env`. Скопируйте в него содержимое из файла `example.env`. Следуя инструкциям, добавьте токен своего Telegram бота и ключ аутентификации Gigachat:
   - [Инструкция для получения токена Telegram бота](https://timeweb.com/ru/community/articles/token-bota-telegram-kak-sdelat-gde-vzyat-i-kuda-vstavlyat)
   - [Инструкция для получения ключа к API Gigachat](https://developers.sber.ru/docs/ru/gigachat/individuals-quickstart)
5. Соберите проект с помощью консольной команды `make setup`
6. Запустите проект:
   - Через Docker container: `make docker`
   - Без контейнера: `make run`
Ваш бот ожил и готов к взаимодействию с пользователями!

## Взаимодействие пользователя с ботом
Для начала, если пользователь впервые запустил бота, ему необходимо пройти быструю регистрацию в системе.
После регистрации бот периодически будет предлагать пользователю пройти опрос **дневника настроения**: пользователь оценивает своё состояние по 10-балльной шкале, результаты опроса сохраняются в базе данных.
- По команде `/fill_diary` пользователь может в любое время отметить своё настроение.
- Команда `/diary_settings` вызывает небольшое меню с inline-кнопками, которые позволяют включить и выключить рассылку периодических сообщений от бота.
- С помощью команды `/diary_statistics` пользователь может получить график, отражающий динамику его настроения из записей дневника
- Если пользователь забыл возможные команды, он может вызвать подсказку с помощью `/help`. Также в клавиатуру встроено меню, поэтому команды всегда находятся под рукой!
- `/start_poll` -- команда открывает меню, в котором пользователь может выбрать и пройти психологический тест.


---
- [Шаблон проекта, был взят для начальной структуры](https://github.com/Latand/tgbot_template_v3)

